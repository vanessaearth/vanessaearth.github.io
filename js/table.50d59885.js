"use strict";(self["webpackChunkmy_blog"]=self["webpackChunkmy_blog"]||[]).push([[986],{7739:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"filter-box"},[e("div",{staticClass:"filter-line"},[e("div",{staticClass:"filter-label"},[t._v("姓名：")]),e("ElSelect",{staticClass:"wid235 mul-select",attrs:{size:"small","collapse-tags":"",multiple:"",filterable:"",remote:"","remote-method":e=>{t.remoteName(e,"name")},"reserve-keyword":!1},model:{value:t.filterParams.nameList,callback:function(e){t.$set(t.filterParams,"nameList",e)},expression:"filterParams.nameList"}},t._l(t.filterOption.name,(function(t,a){return e("ElOption",{key:a,attrs:{label:t,value:a}})})),1)],1),e("div",{staticClass:"filter-line"},[e("div",{staticClass:"filter-label"},[t._v("状态：")]),e("ElSelect",{staticClass:"wid235 mul-select",attrs:{size:"small","collapse-tags":"",multiple:"",filterable:"","reserve-keyword":!1},model:{value:t.filterParams.statusList,callback:function(e){t.$set(t.filterParams,"statusList",e)},expression:"filterParams.statusList"}},t._l({online:"上线",offline:"下线"},(function(t,a){return e("ElOption",{key:a,attrs:{label:t,value:a}})})),1)],1),e("ElButton",{staticClass:"search-btn",attrs:{type:"primary"},on:{clicl:t.search}},[t._v("查询")])],1),e("div",{staticClass:"part-box"},[e("div",{staticClass:"part-control-box"},[e("div",{staticClass:"part-right"},[e("ElButton",{attrs:{type:"primary",plain:""},on:{click:t.download}},[t._v("下载")])],1)]),e("MyTable",{attrs:{columns:t.columns,tableData:t.tableData,ipagiation:t.ipagiation},on:{reloadData:t.getAllData,tableSort:t.tableSort},scopedSlots:t._u([{key:"name",fn:function({row:a}){return[e("ElPopover",{attrs:{trigger:"hover",placement:"top"}},[e("p",[t._v("姓名: "+t._s(a.name))]),e("p",[t._v("住址: "+t._s(a.address))]),e("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e("ElTag",{attrs:{size:"medium"}},[t._v(t._s(a.name))])],1)])]}},{key:"address",fn:function({row:e}){return[t._v(" "+t._s(e.address)+" ")]}}])})],1)])},i=[],l=function(){var t=this,e=t._self._c;return e("div",[e("ElTable",{staticClass:"table-template",staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"sort-change":t.tableSort}},t._l(t.columns,(function(a,s){return e("ElTableColumn",{key:s,attrs:{prop:a.prop,label:a.label,sortable:a.sortable,formatter:a.formatter,"sort-orders":["ascending","descending"],width:a.width},scopedSlots:t._u([{key:"default",fn:function({row:e}){return[a.slot?t._t(a.slot,null,{row:e}):t._t("default",(function(){return[t._v(t._s(e[`${a.prop}`]))]}))]}}],null,!0)})})),1),e("ElPagination",{staticClass:"paging-box",attrs:{"current-page":t.ipagiation.pageNum,"page-size":t.ipagiation.pageSize,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:t.ipagiation.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},r=[],o={name:"myTable",components:{},props:{columns:{type:Array},tableData:{type:Array}},data(){return{ipagiation:{pageNum:1,pageSize:10,total:0}}},computed:{},methods:{handleSizeChange(t){this.ipagiation.pageNum=1,this.ipagiation.pageSize=t,this.$emit("reloadData")},handleCurrentChange(t){this.ipagiation.pageNum=t,this.$emit("reloadData")},tableSort({column:t,prop:e,order:a}){a="descending"===a?"desc":"asc";const s={orderBy:e,sequence:a};this.ipagiation.pageNum=1,this.$emit("tableSort",s)}},watch:{},created(){},mounted(){},destroyed(){}},n=o,d=a(1001),c=(0,d.Z)(n,l,r,!1,null,"86cf1a4e",null),p=c.exports;function u(t){const e=new Blob(["\ufeff"+t.data]);let a="report.xls";if(a=decodeURI(a),"download"in document.createElement("a")){const t=document.createElement("a");t.download=a,t.style.display="none",t.href=window.URL.createObjectURL(e),document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)}else navigator.msSaveBlob(e,a)}var m=a(7421),h={name:"tabelPage",components:{MyTable:p},data(){return{editId:0,editAddress:"",editError:!1,filterParams:{nameList:[],statusList:[],orderBy:"Date",sequence:"desc"},filterOption:{name:[]},total:0,tableData:[],tableLoading:!1,ipagiation:{pageNum:1,pageSize:10,total:0},columns:[{prop:"date",label:"日期",sortable:!0,width:180,slotScope:!0},{prop:"status",label:"状态",sortable:!0,width:100,formatter:t=>{let e="";return"online"===t.status?e="上线":"offline"===t.status&&(e="下线"),e}},{prop:"name",label:"姓名",sortable:!0,width:100,slot:"name"},{prop:"address",label:"address",sortable:!0,width:300,slot:"address"}]}},props:{},computed:{},methods:{tableSort(t){this.filterParams.orderBy=t.orderBy,this.filterParams.sequence=t.sequence,this.getAllData()},getAllData(t){t&&(this.ipagiation.pageNum=1);const e=(0,m.X)({...this.filterParams,...this.ipagiation});this.$axios.post("/getTableData",e).then((t=>{this.tableData=t.list,this.ipagiation.total=t.total}))},changeTag(t){this.editId=t.id,this.editAddress=t.address,this.$refs["address"+t.id].$refs.input.focus()},inputFocus(){this.editError=!1},cancelEditCell(){this.editId="",this.editAddress="",this.editError=!1},updateAddressMethod(t,e){const a={id:t.id,address:this.editAddress},s=`/${e}/update`;this.tableLoading=!0,this.axios.post(s,a).then((t=>{this.getAllData()})).finally((t=>{this.editId="",this.editAddress="",this.tableLoading=!1}))},remoteName(t,e){if(t=t.trim(),t){const a=e.charAt(0).toUpperCase()+e.slice(1);this.$axios.post(`/sug${a}`,{key:t}).then((t=>{this.filterOption[e]=t.list}))}},handleSelectionChange(t){},search(){this.getAllData(!0)},download(){this.$axios.get("/download/table",{}).then((t=>{u(t)}))}},watch:{},created(){this.getAllData()},mounted(){},destroyed(){}},g=h,f=(0,d.Z)(g,s,i,!1,null,"c48fac6e",null),b=f.exports}}]);